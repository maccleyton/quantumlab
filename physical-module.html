<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Lab - M√≥dulo F√≠sico</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #2b5b84;
            --secondary: #6cbe45;
            --dark: #1e1e2f;
            --darker: #151523;
            --light: #2a2a3e;
            --text: #ffffff;
            --accent: #ff6b00;
            --fusion: #ff4757;
            --fission: #6cbe45;
            --collider: #2b5b84;
            --antimatter: #ab47bc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            color: var(--text);
            min-height: 100vh;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--light) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--secondary), #8dee6a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .physics-icon {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 4em;
            opacity: 0.3;
        }

        .tabs {
            display: flex;
            background: var(--light);
            border-radius: 15px 15px 0 0;
            overflow: hidden;
            margin-bottom: 0;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab:hover {
            background: var(--primary);
        }

        .tab.active {
            background: var(--primary);
            border-bottom: 3px solid var(--secondary);
        }

        .tab-content {
            display: none;
            background: var(--light);
            border-radius: 0 0 15px 15px;
            padding: 30px;
            margin-bottom: 30px;
            min-height: 700px;
        }

        .tab-content.active {
            display: block;
        }

        /* Layout dos Simuladores */
        .simulator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 600px;
        }

        @media (max-width: 1200px) {
            .simulator-grid {
                grid-template-columns: 1fr;
                height: auto;
            }
        }

        .visualization-panel {
            background: var(--darker);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--primary);
            position: relative;
        }

        .controls-panel {
            background: var(--darker);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid var(--primary);
            overflow-y: auto;
        }

        #collider3D, #fusion3D, #fission3D, #antimatter3D {
            width: 100%;
            height: 100%;
            background: var(--dark);
            border-radius: 10px;
        }

        .control-group {
            background: var(--dark);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .control-group h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 5px;
        }

        .slider-container {
            margin: 15px 0;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: var(--light);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #3a7bbf;
        }

        .btn-fusion {
            background: var(--fusion);
            color: white;
        }

        .btn-fission {
            background: var(--fission);
            color: white;
        }

        .btn-collider {
            background: var(--collider);
            color: white;
        }

        .btn-antimatter {
            background: var(--antimatter);
            color: white;
        }

        .energy-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .energy-card {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid var(--accent);
        }

        .energy-value {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--accent);
            margin: 5px 0;
        }

        .particle-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .particle-btn {
            background: var(--light);
            border: 2px solid var(--primary);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .particle-btn:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .particle-btn.active {
            border-color: var(--accent);
            background: var(--primary);
        }

        .reaction-equation {
            background: var(--light);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            font-size: 1.3em;
            margin: 20px 0;
            border-left: 4px solid var(--secondary);
        }

        .data-log {
            background: var(--dark);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid var(--accent);
            background: rgba(255,255,255,0.05);
        }

        .chart-container {
            height: 200px;
            margin: 20px 0;
        }

        .particle-track {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            pointer-events: none;
        }

        .collision-event {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            pointer-events: none;
            animation: collisionFlash 0.5s ease-out;
        }

        @keyframes collisionFlash {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }

        .status-indicators {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .status-indicator {
            background: var(--light);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .status-value {
            font-size: 1.2em;
            font-weight: bold;
            margin: 5px 0;
        }

        .experiment-presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .preset-btn {
            background: var(--light);
            border: 1px solid var(--primary);
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preset-btn:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="physics-icon">üåå</div>
            <h1>M√ìDULO F√çSICO</h1>
            <p>Fus√£o Nuclear, Fiss√£o Nuclear, Colisor de Part√≠culas e Cria√ß√£o de Antimat√©ria</p>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="fusion">‚ò¢Ô∏è Fus√£o Nuclear</div>
            <div class="tab" data-tab="fission">üí• Fiss√£o Nuclear</div>
            <div class="tab" data-tab="collider">‚ö° Colisor de Part√≠culas</div>
            <div class="tab" data-tab="antimatter">üåÄ Antimat√©ria</div>
        </div>

        <!-- ABA: Fus√£o Nuclear -->
        <div class="tab-content active" id="fusion">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üî• Visualiza√ß√£o da Fus√£o Nuclear</h3>
                    <div id="fusion3D">
                        <!-- Visualiza√ß√£o 3D da fus√£o -->
                    </div>
                    <div class="energy-display">
                        <div class="energy-card">
                            <div>Temperatura</div>
                            <div class="energy-value" id="fusionTemp">10 MK</div>
                        </div>
                        <div class="energy-card">
                            <div>Energia Liberada</div>
                            <div class="energy-value" id="fusionEnergy">0 MeV</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles de Fus√£o</h3>
                    
                    <div class="control-group">
                        <h4>‚öõÔ∏è Rea√ß√µes de Fus√£o</h4>
                        <div class="experiment-presets">
                            <div class="preset-btn" onclick="loadFusionPreset('deuterium-tritium')">
                                D + T ‚Üí He
                            </div>
                            <div class="preset-btn" onclick="loadFusionPreset('deuterium-deuterium')">
                                D + D ‚Üí He
                            </div>
                            <div class="preset-btn" onclick="loadFusionPreset('proton-proton')">
                                p + p ‚Üí D
                            </div>
                            <div class="preset-btn" onclick="loadFusionPreset('stellar')">
                                Fus√£o Estelar
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üî• Par√¢metros do Plasma</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Temperatura do Plasma:</span>
                                <span id="plasmaTempValue">10 MK</span>
                            </div>
                            <input type="range" id="plasmaTemp" min="1" max="100" value="10" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Densidade do Plasma:</span>
                                <span id="plasmaDensityValue">10¬≤‚Å∞ part/m¬≥</span>
                            </div>
                            <input type="range" id="plasmaDensity" min="1" max="100" value="50" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Confinamento Magn√©tico:</span>
                                <span id="confinementValue">5 T</span>
                            </div>
                            <input type="range" id="confinement" min="0" max="10" value="5" step="0.1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìà M√©tricas da Rea√ß√£o</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>Taxa de Fus√£o</div>
                                <div class="status-value" id="fusionRate">0/s</div>
                            </div>
                            <div class="status-indicator">
                                <div>Ganho de Energia</div>
                                <div class="status-value" id="energyGain">0</div>
                            </div>
                            <div class="status-indicator">
                                <div>Press√£o</div>
                                <div class="status-value" id="fusionPressure">0 atm</div>
                            </div>
                            <div class="status-indicator">
                                <div>Efici√™ncia</div>
                                <div class="status-value" id="fusionEfficiency">0%</div>
                            </div>
                        </div>
                    </div>

                    <div class="reaction-equation" id="fusionEquation">
                        D + T ‚Üí He‚Å¥ + n + 17.6 MeV
                    </div>

                    <div class="control-group">
                        <button class="btn btn-fusion" onclick="startFusion()">Ignitar Fus√£o</button>
                        <button class="btn btn-primary" onclick="resetFusion()">Reiniciar</button>
                        <button class="btn btn-primary" onclick="exportFusionData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="fusionLog">
                        <div class="log-entry">Sistema de fus√£o inicializado</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Fiss√£o Nuclear -->
        <div class="tab-content" id="fission">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üí• Visualiza√ß√£o da Fiss√£o Nuclear</h3>
                    <div id="fission3D">
                        <!-- Visualiza√ß√£o 3D da fiss√£o -->
                    </div>
                    <div class="energy-display">
                        <div class="energy-card">
                            <div>N√™utrons por Fiss√£o</div>
                            <div class="energy-value" id="neutronsPerFission">2.5</div>
                        </div>
                        <div class="energy-card">
                            <div>Energia por Fiss√£o</div>
                            <div class="energy-value" id="fissionEnergy">200 MeV</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles de Fiss√£o</h3>
                    
                    <div class="control-group">
                        <h4>‚öõÔ∏è Elementos Fission√°veis</h4>
                        <div class="particle-selector">
                            <div class="particle-btn active" data-element="uranium235">U-235</div>
                            <div class="particle-btn" data-element="plutonium239">Pu-239</div>
                            <div class="particle-btn" data-element="uranium233">U-233</div>
                            <div class="particle-btn" data-element="thorium232">Th-232</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìä Par√¢metros do Reator</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Massa Cr√≠tica:</span>
                                <span id="criticalMassValue">52 kg</span>
                            </div>
                            <input type="range" id="criticalMass" min="1" max="100" value="52" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Barras de Controle:</span>
                                <span id="controlRodsValue">75%</span>
                            </div>
                            <input type="range" id="controlRods" min="0" max="100" value="75" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Moderador:</span>
                                <span id="moderatorValue">√Ågua</span>
                            </div>
                            <input type="range" id="moderator" min="0" max="2" value="1" step="1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìà Rea√ß√£o em Cadeia</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>Fator k</div>
                                <div class="status-value" id="kFactor">1.00</div>
                            </div>
                            <div class="status-indicator">
                                <div>Taxa de Fiss√£o</div>
                                <div class="status-value" id="fissionRate">0/s</div>
                            </div>
                            <div class="status-indicator">
                                <div>Temperatura</div>
                                <div class="status-value" id="reactorTemp">300¬∞C</div>
                            </div>
                            <div class="status-indicator">
                                <div>Pot√™ncia</div>
                                <div class="status-value" id="reactorPower">0 MW</div>
                            </div>
                        </div>
                    </div>

                    <div class="reaction-equation" id="fissionEquation">
                        U¬≤¬≥‚Åµ + n ‚Üí Ba¬π‚Å¥¬π + Kr‚Åπ¬≤ + 3n + 200 MeV
                    </div>

                    <div class="control-group">
                        <button class="btn btn-fission" onclick="startFission()">Iniciar Fiss√£o</button>
                        <button class="btn btn-primary" onclick="scramReactor()">Parada de Emerg√™ncia</button>
                        <button class="btn btn-primary" onclick="exportFissionData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="fissionLog">
                        <div class="log-entry">Reator de fiss√£o inicializado</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Colisor de Part√≠culas -->
        <div class="tab-content" id="collider">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>‚ö° Colisor de Part√≠culas</h3>
                    <div id="collider3D">
                        <!-- Visualiza√ß√£o 3D do colisor -->
                    </div>
                    <div class="energy-display">
                        <div class="energy-card">
                            <div>Energia do Feixe</div>
                            <div class="energy-value" id="beamEnergy">7 TeV</div>
                        </div>
                        <div class="energy-card">
                            <div>Taxa de Colis√µes</div>
                            <div class="status-value" id="collisionRate">0 Hz</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles do Colisor</h3>
                    
                    <div class="control-group">
                        <h4>üî¨ Part√≠culas para Colis√£o</h4>
                        <div class="particle-selector">
                            <div class="particle-btn active" data-particle="proton">Pr√≥ton</div>
                            <div class="particle-btn" data-particle="electron">El√©tron</div>
                            <div class="particle-btn" data-particle="lead">N√∫cleo de Chumbo</div>
                            <div class="particle-btn" data-particle="photon">F√≥ton</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>‚ö° Par√¢metros do Acelerador</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Energia do Feixe:</span>
                                <span id="beamEnergyValue">7 TeV</span>
                            </div>
                            <input type="range" id="beamEnergySlider" min="1" max="14" value="7" step="0.1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Luminosidade:</span>
                                <span id="luminosityValue">10¬≥‚Å¥ cm‚Åª¬≤s‚Åª¬π</span>
                            </div>
                            <input type="range" id="luminosity" min="1" max="100" value="50" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Campo Magn√©tico:</span>
                                <span id="colliderFieldValue">8.3 T</span>
                            </div>
                            <input type="range" id="colliderField" min="1" max="10" value="8.3" step="0.1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üéØ Detectores</h4>
                        <div class="experiment-presets">
                            <div class="preset-btn" onclick="loadDetector('atlas')">ATLAS</div>
                            <div class="preset-btn" onclick="loadDetector('cms')">CMS</div>
                            <div class="preset-btn" onclick="loadDetector('alice')">ALICE</div>
                            <div class="preset-btn" onclick="loadDetector('lhcb')">LHCb</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìä Part√≠culas Detectadas</h4>
                        <div class="chart-container">
                            <canvas id="particleChart"></canvas>
                        </div>
                    </div>

                    <div class="control-group">
                        <button class="btn btn-collider" onclick="startCollider()">Iniciar Colisor</button>
                        <button class="btn btn-primary" onclick="stopCollider()">Parar Colisor</button>
                        <button class="btn btn-primary" onclick="exportColliderData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="colliderLog">
                        <div class="log-entry">Colisor inicializado - Pronto para opera√ß√£o</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Antimat√©ria -->
        <div class="tab-content" id="antimatter">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üåÄ Cria√ß√£o de Antimat√©ria</h3>
                    <div id="antimatter3D">
                        <!-- Visualiza√ß√£o 3D da cria√ß√£o de antimat√©ria -->
                    </div>
                    <div class="energy-display">
                        <div class="energy-card">
                            <div>Antipart√≠culas Criadas</div>
                            <div class="energy-value" id="antiparticlesCreated">0</div>
                        </div>
                        <div class="energy-card">
                            <div>Energia Necess√°ria</div>
                            <div class="energy-value" id="antimatterEnergy">1.02 MeV</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles de Antimat√©ria</h3>
                    
                    <div class="control-group">
                        <h4>üåÄ Pares Part√≠cula-Antipart√≠cula</h4>
                        <div class="particle-selector">
                            <div class="particle-btn active" data-pair="electron">e‚Åª/e‚Å∫</div>
                            <div class="particle-btn" data-pair="muon">Œº‚Åª/Œº‚Å∫</div>
                            <div class="particle-btn" data-pair="proton">p/pÃÑ</div>
                            <div class="particle-btn" data-pair="photon">Œ≥/Œ≥</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>‚ö° M√©todos de Cria√ß√£o</h4>
                        <div class="experiment-presets">
                            <div class="preset-btn" onclick="loadCreationMethod('pairProduction')">Produ√ß√£o de Pares</div>
                            <div class="preset-btn" onclick="loadCreationMethod('collider')">Colis√µes</div>
                            <div class="preset-btn" onclick="loadCreationMethod('decay')">Decaimento</div>
                            <div class="preset-btn" onclick="loadCreationMethod('laser')">Laser</div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üîß Par√¢metros do Experimento</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Energia do F√≥ton:</span>
                                <span id="photonEnergyValue">2.04 MeV</span>
                            </div>
                            <input type="range" id="photonEnergy" min="1.02" max="10" value="2.04" step="0.01">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Confinamento Magn√©tico:</span>
                                <span id="antimatterFieldValue">5 T</span>
                            </div>
                            <input type="range" id="antimatterField" min="0" max="10" value="5" step="0.1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Tempo de Vida:</span>
                                <span id="lifetimeValue">‚àû</span>
                            </div>
                            <input type="range" id="lifetime" min="1" max="100" value="100" step="1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìà Estat√≠sticas</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>Efici√™ncia</div>
                                <div class="status-value" id="creationEfficiency">0%</div>
                            </div>
                            <div class="status-indicator">
                                <div>Aniquila√ß√µes</div>
                                <div class="status-value" id="annihilations">0</div>
                            </div>
                            <div class="status-indicator">
                                <div>Armazenamento</div>
                                <div class="status-value" id="storageTime">0 s</div>
                            </div>
                            <div class="status-indicator">
                                <div>Raz√£o Mat√©ria/Antimat√©ria</div>
                                <div class="status-value" id="matterRatio">1:0</div>
                            </div>
                        </div>
                    </div>

                    <div class="reaction-equation" id="antimatterEquation">
                        Œ≥ ‚Üí e‚Åª + e‚Å∫
                    </div>

                    <div class="control-group">
                        <button class="btn btn-antimatter" onclick="createAntimatter()">Criar Antimat√©ria</button>
                        <button class="btn btn-primary" onclick="annihilate()">Aniquilar</button>
                        <button class="btn btn-primary" onclick="exportAntimatterData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="antimatterLog">
                        <div class="log-entry">Sistema de antimat√©ria inicializado</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Banco de dados para simula√ß√µes
        const physicsDatabase = {
            fusion: {
                'deuterium-tritium': {
                    equation: 'D + T ‚Üí He‚Å¥ + n + 17.6 MeV',
                    crossSection: 5.0,
                    energy: 17.6,
                    particles: ['deuterium', 'tritium', 'helium4', 'neutron']
                },
                'deuterium-deuterium': {
                    equation: 'D + D ‚Üí He¬≥ + n + 3.27 MeV',
                    crossSection: 0.1,
                    energy: 3.27,
                    particles: ['deuterium', 'deuterium', 'helium3', 'neutron']
                },
                'proton-proton': {
                    equation: 'p + p ‚Üí D + e‚Å∫ + ŒΩ‚Çë + 0.42 MeV',
                    crossSection: 0.0000001,
                    energy: 0.42,
                    particles: ['proton', 'proton', 'deuterium', 'positron', 'neutrino']
                }
            },
            fission: {
                'uranium235': {
                    equation: 'U¬≤¬≥‚Åµ + n ‚Üí Ba¬π‚Å¥¬π + Kr‚Åπ¬≤ + 3n + 200 MeV',
                    criticalMass: 52,
                    neutrons: 2.5,
                    energy: 200
                },
                'plutonium239': {
                    equation: 'Pu¬≤¬≥‚Åπ + n ‚Üí Xe¬π‚Å¥‚Å∞ + Zr‚Åπ‚Åπ + 2n + 210 MeV',
                    criticalMass: 10,
                    neutrons: 2.9,
                    energy: 210
                }
            },
            particles: {
                'proton': { mass: 938.27, charge: 1, type: 'baryon' },
                'electron': { mass: 0.511, charge: -1, type: 'lepton' },
                'positron': { mass: 0.511, charge: 1, type: 'lepton' },
                'neutron': { mass: 939.57, charge: 0, type: 'baryon' },
                'photon': { mass: 0, charge: 0, type: 'boson' },
                'deuterium': { mass: 1875.61, charge: 1, type: 'nucleus' }
            }
        };

        // Estado das simula√ß√µes
        let currentSimulation = {
            fusion: {
                active: false,
                temperature: 10, // MK
                density: 50,
                confinement: 5,
                reaction: 'deuterium-tritium'
            },
            fission: {
                active: false,
                element: 'uranium235',
                mass: 52,
                controlRods: 75,
                moderator: 1
            },
            collider: {
                active: false,
                particle: 'proton',
                energy: 7, // TeV
                luminosity: 50,
                magneticField: 8.3,
                detector: 'atlas'
            },
            antimatter: {
                active: false,
                pair: 'electron',
                method: 'pairProduction',
                photonEnergy: 2.04, // MeV
                magneticField: 5,
                lifetime: 100
            }
        };

        // Vari√°veis de visualiza√ß√£o
        let fusionScene, fissionScene, colliderScene, antimatterScene;
        let fusionRenderer, fissionRenderer, colliderRenderer, antimatterRenderer;
        let particleChart = null;

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            initializeVisualizations();
            initializeParticleChart();
            initializeEventListeners();
        });

        // Sistema de Abas
        function initializeTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // Inicializar Visualiza√ß√µes 3D
        function initializeVisualizations() {
            initializeFusion3D();
            initializeFission3D();
            initializeCollider3D();
            initializeAntimatter3D();
        }

        function initializeFusion3D() {
            const container = document.getElementById('fusion3D');
            
            fusionScene = new THREE.Scene();
            fusionScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 15;
            
            fusionRenderer = new THREE.WebGLRenderer({ antialias: true });
            fusionRenderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(fusionRenderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, fusionRenderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            fusionScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            fusionScene.add(directionalLight);
            
            // Plasma base
            const plasmaGeometry = new THREE.SphereGeometry(5, 32, 32);
            const plasmaMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xff4757,
                transparent: true,
                opacity: 0.3
            });
            const plasma = new THREE.Mesh(plasmaGeometry, plasmaMaterial);
            fusionScene.add(plasma);
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                fusionRenderer.render(fusionScene, camera);
                
                // Animar part√≠culas do plasma
                plasma.rotation.y += 0.01;
            }
            animate();
        }

        function initializeFission3D() {
            const container = document.getElementById('fission3D');
            
            fissionScene = new THREE.Scene();
            fissionScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 10;
            
            fissionRenderer = new THREE.WebGLRenderer({ antialias: true });
            fissionRenderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(fissionRenderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, fissionRenderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            fissionScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            fissionScene.add(directionalLight);
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                fissionRenderer.render(fissionScene, camera);
            }
            animate();
        }

        function initializeCollider3D() {
            const container = document.getElementById('collider3D');
            
            colliderScene = new THREE.Scene();
            colliderScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 20;
            
            colliderRenderer = new THREE.WebGLRenderer({ antialias: true });
            colliderRenderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(colliderRenderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, colliderRenderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            colliderScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            colliderScene.add(directionalLight);
            
            // Criar anel do colisor
            const ringGeometry = new THREE.TorusGeometry(8, 0.5, 16, 100);
            const ringMaterial = new THREE.MeshBasicMaterial({ color: 0x2b5b84 });
            const ring = new THREE.Mesh(ringGeometry, ringMaterial);
            colliderScene.add(ring);
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                colliderRenderer.render(colliderScene, camera);
                
                // Animar part√≠culas no colisor
                ring.rotation.x += 0.01;
            }
            animate();
        }

        function initializeAntimatter3D() {
            const container = document.getElementById('antimatter3D');
            
            antimatterScene = new THREE.Scene();
            antimatterScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 10;
            
            antimatterRenderer = new THREE.WebGLRenderer({ antialias: true });
            antimatterRenderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(antimatterRenderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, antimatterRenderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            antimatterScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            antimatterScene.add(directionalLight);
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                antimatterRenderer.render(antimatterScene, camera);
            }
            animate();
        }

        // Gr√°fico de Part√≠culas
        function initializeParticleChart() {
            const ctx = document.getElementById('particleChart').getContext('2d');
            particleChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Pr√≥tons', 'El√©trons', 'F√≥tons', 'Neutrinos', 'M√∫ons', 'P√≠ons'],
                    datasets: [{
                        label: 'Part√≠culas Detectadas',
                        data: [0, 0, 0, 0, 0, 0],
                        backgroundColor: [
                            '#ff4757', '#6cbe45', '#2b5b84', '#ffa726', '#ab47bc', '#26c6da'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#ffffff' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        x: {
                            ticks: { color: '#ffffff' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });
        }

        // Event Listeners
        function initializeEventListeners() {
            // Fus√£o
            document.getElementById('plasmaTemp').addEventListener('input', updateFusionParameters);
            document.getElementById('plasmaDensity').addEventListener('input', updateFusionParameters);
            document.getElementById('confinement').addEventListener('input', updateFusionParameters);
            
            // Fiss√£o
            document.querySelectorAll('.particle-btn[data-element]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.particle-btn[data-element]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.fission.element = this.dataset.element;
                    updateFissionParameters();
                });
            });
            
            document.getElementById('criticalMass').addEventListener('input', updateFissionParameters);
            document.getElementById('controlRods').addEventListener('input', updateFissionParameters);
            document.getElementById('moderator').addEventListener('input', updateFissionParameters);
            
            // Colisor
            document.querySelectorAll('.particle-btn[data-particle]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.particle-btn[data-particle]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.collider.particle = this.dataset.particle;
                    updateColliderParameters();
                });
            });
            
            document.getElementById('beamEnergySlider').addEventListener('input', updateColliderParameters);
            document.getElementById('luminosity').addEventListener('input', updateColliderParameters);
            document.getElementById('colliderField').addEventListener('input', updateColliderParameters);
            
            // Antimat√©ria
            document.querySelectorAll('.particle-btn[data-pair]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.particle-btn[data-pair]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.antimatter.pair = this.dataset.pair;
                    updateAntimatterParameters();
                });
            });
            
            document.getElementById('photonEnergy').addEventListener('input', updateAntimatterParameters);
            document.getElementById('antimatterField').addEventListener('input', updateAntimatterParameters);
            document.getElementById('lifetime').addEventListener('input', updateAntimatterParameters);
        }

        // Fun√ß√µes de Fus√£o Nuclear
        function loadFusionPreset(preset) {
            currentSimulation.fission.reaction = preset;
            const reaction = physicsDatabase.fusion[preset];
            
            document.getElementById('fusionEquation').textContent = reaction.equation;
            document.getElementById('fusionEnergy').textContent = reaction.energy + ' MeV';
            
            addLogEntry('fusionLog', `Preset carregado: ${preset}`);
        }

        function updateFusionParameters() {
            const temp = document.getElementById('plasmaTemp').value;
            const density = document.getElementById('plasmaDensity').value;
            const confinement = document.getElementById('confinement').value;
            
            currentSimulation.fusion.temperature = temp;
            currentSimulation.fusion.density = density;
            currentSimulation.fusion.confinement = confinement;
            
            document.getElementById('plasmaTempValue').textContent = temp + ' MK';
            document.getElementById('plasmaDensityValue').textContent = `10¬≤‚Å∞ part/m¬≥`;
            document.getElementById('confinementValue').textContent = confinement + ' T';
            
            // Atualizar m√©tricas
            const fusionRate = calculateFusionRate();
            const energyGain = calculateEnergyGain();
            
            document.getElementById('fusionRate').textContent = fusionRate.toExponential(2) + '/s';
            document.getElementById('energyGain').textContent = energyGain.toFixed(2);
            document.getElementById('fusionPressure').textContent = (temp * density / 100).toFixed(1) + ' atm';
            document.getElementById('fusionEfficiency').textContent = (energyGain * 10).toFixed(1) + '%';
        }

        function calculateFusionRate() {
            // Taxa de fus√£o baseada na temperatura e densidade
            const T = currentSimulation.fusion.temperature; // MK
            const n = currentSimulation.fusion.density;
            const œÉ = physicsDatabase.fusion[currentSimulation.fusion.reaction].crossSection;
            
            return œÉ * n * n * Math.pow(T, 2) * 1e20;
        }

        function calculateEnergyGain() {
            // Ganho de energia Q = E_out / E_in
            const T = currentSimulation.fusion.temperature;
            const E_fusion = physicsDatabase.fusion[currentSimulation.fusion.reaction].energy;
            
            return (E_fusion * calculateFusionRate()) / (T * 1e3);
        }

        function startFusion() {
            currentSimulation.fusion.active = true;
            addLogEntry('fusionLog', 'Fus√£o nuclear iniciada');
            addLogEntry('fusionLog', `Temperatura do plasma: ${currentSimulation.fusion.temperature} MK`);
            addLogEntry('fusionLog', `Rea√ß√£o: ${currentSimulation.fusion.reaction}`);
            
            // Simular fus√£o cont√≠nua
            if (currentSimulation.fusion.active) {
                setTimeout(() => {
                    const energy = calculateFusionRate() * physicsDatabase.fusion[currentSimulation.fusion.reaction].energy;
                    addLogEntry('fusionLog', `Energia liberada: ${energy.toExponential(2)} MeV`);
                }, 2000);
            }
        }

        function resetFusion() {
            currentSimulation.fusion.active = false;
            document.getElementById('fusionLog').innerHTML = '<div class="log-entry">Sistema de fus√£o reinicializado</div>';
        }

        // Fun√ß√µes de Fiss√£o Nuclear
        function updateFissionParameters() {
            const mass = document.getElementById('criticalMass').value;
            const rods = document.getElementById('controlRods').value;
            const moderator = document.getElementById('moderator').value;
            
            currentSimulation.fission.mass = mass;
            currentSimulation.fission.controlRods = rods;
            currentSimulation.fission.moderator = moderator;
            
            document.getElementById('criticalMassValue').textContent = mass + ' kg';
            document.getElementById('controlRodsValue').textContent = rods + '%';
            
            const moderators = ['Grafite', '√Ågua', '√Ågua Pesada'];
            document.getElementById('moderatorValue').textContent = moderators[moderator];
            
            // Atualizar m√©tricas
            const kFactor = calculateKFactor();
            const power = calculateReactorPower();
            
            document.getElementById('kFactor').textContent = kFactor.toFixed(3);
            document.getElementById('reactorPower').textContent = power.toFixed(1) + ' MW';
            document.getElementById('reactorTemp').textContent = (300 + power * 2).toFixed(0) + '¬∞C';
        }

        function calculateKFactor() {
            // Fator de multiplica√ß√£o neutr√¥nica
            const massEffect = currentSimulation.fission.mass / physicsDatabase.fission[currentSimulation.fission.element].criticalMass;
            const rodEffect = (100 - currentSimulation.fission.controlRods) / 100;
            const moderatorEffect = 0.8 + currentSimulation.fission.moderator * 0.1;
            
            return massEffect * rodEffect * moderatorEffect;
        }

        function calculateReactorPower() {
            const k = calculateKFactor();
            if (k <= 1) return 0;
            
            const basePower = physicsDatabase.fission[currentSimulation.fission.element].energy;
            return basePower * (k - 1) * 100;
        }

        function startFission() {
            currentSimulation.fission.active = true;
            addLogEntry('fissionLog', 'Reator de fiss√£o iniciado');
            addLogEntry('fissionLog', `Elemento: ${currentSimulation.fission.element}`);
            addLogEntry('fissionLog', `Massa: ${currentSimulation.fission.mass} kg`);
            
            const k = calculateKFactor();
            if (k > 1) {
                addLogEntry('fissionLog', '‚ö†Ô∏è REA√á√ÉO EM CADEIA CR√çTICA DETECTADA');
            }
        }

        function scramReactor() {
            currentSimulation.fission.active = false;
            addLogEntry('fissionLog', 'üö® PARADA DE EMERG√äNCIA ATIVADA');
            addLogEntry('fissionLog', 'Barras de controle inseridas');
            document.getElementById('controlRods').value = 100;
            updateFissionParameters();
        }

        // Fun√ß√µes do Colisor
        function loadDetector(detector) {
            currentSimulation.collider.detector = detector;
            addLogEntry('colliderLog', `Detector ${detector.toUpperCase()} ativado`);
        }

        function updateColliderParameters() {
            const energy = document.getElementById('beamEnergySlider').value;
            const luminosity = document.getElementById('luminosity').value;
            const field = document.getElementById('colliderField').value;
            
            currentSimulation.collider.energy = energy;
            currentSimulation.collider.luminosity = luminosity;
            currentSimulation.collider.magneticField = field;
            
            document.getElementById('beamEnergyValue').textContent = energy + ' TeV';
            document.getElementById('luminosityValue').textContent = `10¬≥‚Å¥ cm‚Åª¬≤s‚Åª¬π`;
            document.getElementById('colliderFieldValue').textContent = field + ' T';
            
            // Atualizar taxa de colis√µes
            const collisionRate = calculateCollisionRate();
            document.getElementById('collisionRate').textContent = collisionRate.toExponential(2) + ' Hz';
        }

        function calculateCollisionRate() {
            const L = currentSimulation.collider.luminosity;
            const E = currentSimulation.collider.energy;
            return L * E * 1e10;
        }

        function startCollider() {
            currentSimulation.collider.active = true;
            addLogEntry('colliderLog', 'Colisor iniciado');
            addLogEntry('colliderLog', `Energia do feixe: ${currentSimulation.collider.energy} TeV`);
            addLogEntry('colliderLog', `Part√≠cula: ${currentSimulation.collider.particle}`);
            
            // Simular detec√ß√£o de part√≠culas
            simulateParticleDetection();
        }

        function stopCollider() {
            currentSimulation.collider.active = false;
            addLogEntry('colliderLog', 'Colisor parado');
        }

        function simulateParticleDetection() {
            if (!currentSimulation.collider.active) return;
            
            // Atualizar gr√°fico com dados simulados
            const newData = particleChart.data.datasets[0].data.map(() => 
                Math.floor(Math.random() * 1000)
            );
            particleChart.data.datasets[0].data = newData;
            particleChart.update();
            
            setTimeout(simulateParticleDetection, 1000);
        }

        // Fun√ß√µes de Antimat√©ria
        function loadCreationMethod(method) {
            currentSimulation.antimatter.method = method;
            addLogEntry('antimatterLog', `M√©todo de cria√ß√£o: ${method}`);
        }

        function updateAntimatterParameters() {
            const photonEnergy = document.getElementById('photonEnergy').value;
            const field = document.getElementById('antimatterField').value;
            const lifetime = document.getElementById('lifetime').value;
            
            currentSimulation.antimatter.photonEnergy = photonEnergy;
            currentSimulation.antimatter.magneticField = field;
            currentSimulation.antimatter.lifetime = lifetime;
            
            document.getElementById('photonEnergyValue').textContent = photonEnergy + ' MeV';
            document.getElementById('antimatterFieldValue').textContent = field + ' T';
            document.getElementById('lifetimeValue').textContent = lifetime === '100' ? '‚àû' : lifetime + ' ms';
            
            // Atualizar energia necess√°ria
            const pair = currentSimulation.antimatter.pair;
            const minEnergy = pair === 'electron' ? 1.02 : pair === 'muon' ? 211 : 1876;
            document.getElementById('antimatterEnergy').textContent = minEnergy + ' MeV';
        }

        function createAntimatter() {
            const pair = currentSimulation.antimatter.pair;
            const photonEnergy = currentSimulation.antimatter.photonEnergy;
            const minEnergy = pair === 'electron' ? 1.02 : pair === 'muon' ? 211 : 1876;
            
            if (photonEnergy >= minEnergy) {
                const count = Math.floor(photonEnergy / minEnergy);
                document.getElementById('antiparticlesCreated').textContent = count;
                
                addLogEntry('antimatterLog', `Criados ${count} pares ${pair}`);
                addLogEntry('antimatterLog', `Energia do f√≥ton: ${photonEnergy} MeV`);
                
                // Atualizar estat√≠sticas
                document.getElementById('creationEfficiency').textContent = 
                    Math.min(100, (count / (photonEnergy / minEnergy) * 100)).toFixed(1) + '%';
                document.getElementById('matterRatio').textContent = `1:${count}`;
            } else {
                addLogEntry('antimatterLog', '‚ùå Energia insuficiente para criar pares');
            }
        }

        function annihilate() {
            const count = parseInt(document.getElementById('antiparticlesCreated').textContent);
            if (count > 0) {
                const energy = count * 1.02 * 2; // MeV
                addLogEntry('antimatterLog', `Aniquila√ß√£o liberou ${energy} MeV`);
                document.getElementById('annihilations').textContent = 
                    parseInt(document.getElementById('annihilations').textContent) + 1;
                document.getElementById('antiparticlesCreated').textContent = '0';
            }
        }

        // Fun√ß√µes Auxiliares
        function addLogEntry(logId, message) {
            const log = document.getElementById(logId);
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function exportFusionData() {
            exportData(currentSimulation.fusion, 'fusion_data');
        }

        function exportFissionData() {
            exportData(currentSimulation.fission, 'fission_data');
        }

        function exportColliderData() {
            exportData(currentSimulation.collider, 'collider_data');
        }

        function exportAntimatterData() {
            exportData(currentSimulation.antimatter, 'antimatter_data');
        }

        function exportData(data, filename) {
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `${filename}_${new Date().getTime()}.json`;
            link.click();
            
            addLogEntry(filename.split('_')[0] + 'Log', 'Dados exportados com sucesso!');
        }

        // Configurar MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
</body>
</html>