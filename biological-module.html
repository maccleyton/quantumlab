<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Lab - M√≥dulo Biol√≥gico</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #2b5b84;
            --secondary: #6cbe45;
            --dark: #1e1e2f;
            --darker: #151523;
            --light: #2a2a3e;
            --text: #ffffff;
            --accent: #ff6b00;
            --cell: #6cbe45;
            --dna: #ab47bc;
            --bacteria: #2b5b84;
            --virus: #ff4757;
            --fungi: #ffa726;
            --ecosystem: #26c6da;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            color: var(--text);
            min-height: 100vh;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--light) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--secondary), #8dee6a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .bio-icon {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 4em;
            opacity: 0.3;
        }

        .tabs {
            display: flex;
            background: var(--light);
            border-radius: 15px 15px 0 0;
            overflow: hidden;
            margin-bottom: 0;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab:hover {
            background: var(--primary);
        }

        .tab.active {
            background: var(--primary);
            border-bottom: 3px solid var(--secondary);
        }

        .tab-content {
            display: none;
            background: var(--light);
            border-radius: 0 0 15px 15px;
            padding: 30px;
            margin-bottom: 30px;
            min-height: 700px;
        }

        .tab-content.active {
            display: block;
        }

        /* Layout dos Simuladores */
        .simulator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            height: 600px;
        }

        @media (max-width: 1200px) {
            .simulator-grid {
                grid-template-columns: 1fr;
                height: auto;
            }
        }

        .visualization-panel {
            background: var(--darker);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--primary);
            position: relative;
        }

        .controls-panel {
            background: var(--darker);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid var(--primary);
            overflow-y: auto;
        }

        #cell3D, #dna3D, #ecosystem3D, #microbe3D, #human3D, #evolution3D {
            width: 100%;
            height: 100%;
            background: var(--dark);
            border-radius: 10px;
        }

        .control-group {
            background: var(--dark);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .control-group h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 5px;
        }

        .slider-container {
            margin: 15px 0;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: var(--light);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #3a7bbf;
        }

        .btn-cell {
            background: var(--cell);
            color: white;
        }

        .btn-dna {
            background: var(--dna);
            color: white;
        }

        .btn-bacteria {
            background: var(--bacteria);
            color: white;
        }

        .btn-virus {
            background: var(--virus);
            color: white;
        }

        .btn-fungi {
            background: var(--fungi);
            color: white;
        }

        .btn-ecosystem {
            background: var(--ecosystem);
            color: white;
        }

        .microbe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .microbe-card {
            background: var(--light);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .microbe-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
        }

        .microbe-card.active {
            border-color: var(--accent);
            background: var(--primary);
        }

        .microbe-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .status-indicators {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .status-indicator {
            background: var(--light);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .status-value {
            font-size: 1.2em;
            font-weight: bold;
            margin: 5px 0;
        }

        .data-log {
            background: var(--dark);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid var(--accent);
            background: rgba(255,255,255,0.05);
        }

        .chart-container {
            height: 250px;
            margin: 20px 0;
        }

        .interaction-visualization {
            height: 300px;
            background: var(--dark);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .petri-dish {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            border: 3px solid #fff;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
        }

        .microbe {
            position: absolute;
            border-radius: 50%;
            animation: float 3s infinite ease-in-out;
        }

        .bacteria { background: var(--bacteria); }
        .virus { background: var(--virus); }
        .fungi { background: var(--fungi); }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .ecosystem-map {
            height: 300px;
            background: var(--dark);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .organism {
            position: absolute;
            border-radius: 50%;
            font-size: 1.5em;
            text-align: center;
            line-height: 40px;
        }

        .dna-strand {
            position: relative;
            height: 200px;
            background: var(--dark);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .gene-sequence {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            color: var(--accent);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="bio-icon">üß¨</div>
            <h1>M√ìDULO BIOL√ìGICO</h1>
            <p>C√©lulas, DNA, Ecossistemas, Intera√ß√µes Microbianas e Evolu√ß√£o</p>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="cells">üî¨ C√©lulas e Organismos</div>
            <div class="tab" data-tab="genetics">üß¨ Gen√©tica e DNA</div>
            <div class="tab" data-tab="ecosystems">üåø Ecossistemas</div>
            <div class="tab" data-tab="microbes">ü¶† Intera√ß√µes Microbianas</div>
            <div class="tab" data-tab="human">üë§ Fisiologia Humana</div>
            <div class="tab" data-tab="evolution">üîÑ Evolu√ß√£o</div>
        </div>

        <!-- ABA: C√©lulas e Organismos -->
        <div class="tab-content active" id="cells">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üî¨ C√©lula Eucari√≥tica 3D</h3>
                    <div id="cell3D">
                        <!-- Visualiza√ß√£o 3D da c√©lula -->
                    </div>
                    <div class="status-indicators">
                        <div class="status-indicator">
                            <div>Metabolismo</div>
                            <div class="status-value" id="metabolismRate">85%</div>
                        </div>
                        <div class="status-indicator">
                            <div>ATP Produzido</div>
                            <div class="status-value" id="atpCount">1.2M/s</div>
                        </div>
                        <div class="status-indicator">
                            <div>Divis√£o Celular</div>
                            <div class="status-value" id="divisionTime">24h</div>
                        </div>
                        <div class="status-indicator">
                            <div>Homeostase</div>
                            <div class="status-value" id="homeostasis">92%</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles Celulares</h3>
                    
                    <div class="control-group">
                        <h4>üèóÔ∏è Organelas Celulares</h4>
                        <div class="microbe-grid">
                            <div class="microbe-card active" data-organelle="nucleus">
                                <div class="microbe-icon">üß¨</div>
                                <div>N√∫cleo</div>
                            </div>
                            <div class="microbe-card" data-organelle="mitochondria">
                                <div class="microbe-icon">‚ö°</div>
                                <div>Mitoc√¥ndria</div>
                            </div>
                            <div class="microbe-card" data-organelle="ribosome">
                                <div class="microbe-icon">üîß</div>
                                <div>Ribossomo</div>
                            </div>
                            <div class="microbe-card" data-organelle="golgi">
                                <div class="microbe-icon">üì¶</div>
                                <div>Complexo Golgi</div>
                            </div>
                            <div class="microbe-card" data-organelle="er">
                                <div class="microbe-icon">üîÑ</div>
                                <div>Ret√≠culo</div>
                            </div>
                            <div class="microbe-card" data-organelle="lysosome">
                                <div class="microbe-icon">üßπ</div>
                                <div>Lisossomo</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>‚ö° Processos Celulares</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Taxa Metab√≥lica:</span>
                                <span id="metabolismValue">85%</span>
                            </div>
                            <input type="range" id="metabolismSlider" min="0" max="100" value="85" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Produ√ß√£o de ATP:</span>
                                <span id="atpValue">1.2M/s</span>
                            </div>
                            <input type="range" id="atpSlider" min="0" max="2000000" value="1200000" step="100000">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Temperatura:</span>
                                <span id="cellTempValue">37¬∞C</span>
                            </div>
                            <input type="range" id="cellTemp" min="20" max="45" value="37" step="0.1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìä Estado da C√©lula</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>pH Interno</div>
                                <div class="status-value" id="cellPH">7.2</div>
                            </div>
                            <div class="status-indicator">
                                <div>Press√£o Osm√≥tica</div>
                                <div class="status-value" id="osmoticPressure">280 mOsm</div>
                            </div>
                            <div class="status-indicator">
                                <div>Membrana</div>
                                <div class="status-value" id="membraneIntegrity">98%</div>
                            </div>
                            <div class="status-indicator">
                                <div>Sinaliza√ß√£o</div>
                                <div class="status-value" id="signalingRate">45/s</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <button class="btn btn-cell" onclick="startCellProcess()">Iniciar Processos</button>
                        <button class="btn btn-primary" onclick="divideCell()">Dividir C√©lula</button>
                        <button class="btn btn-primary" onclick="exportCellData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="cellLog">
                        <div class="log-entry">C√©lula eucari√≥tica inicializada</div>
                        <div class="log-entry">Organelas ativas: N√∫cleo, Mitoc√¥ndrias, Ribossomos</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Gen√©tica e DNA -->
        <div class="tab-content" id="genetics">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üß¨ Estrutura do DNA 3D</h3>
                    <div id="dna3D">
                        <!-- Visualiza√ß√£o 3D do DNA -->
                    </div>
                    <div class="dna-strand">
                        <div class="gene-sequence" id="dnaSequence">
                            ATG-CGT-ACC-GTA-TGC-ATG-CGT-ACC-GTA
                        </div>
                    </div>
                </div>
                <!--Recuar codigo abaixo-->                   
                    <div class="control-group">
                        <h4>üß¨ Processos Gen√©ticos</h4>
                        <div class="microbe-grid">
                            <div class="microbe-card active" data-process="replication">
                                <div class="microbe-icon">üìã</div>
                                <div>Replica√ß√£o</div>
                            </div>
                            <div class="microbe-card" data-process="transcription">
                                <div class="microbe-icon">üìù</div>
                                <div>Transcri√ß√£o</div>
                            </div>
                            <div class="microbe-card" data-process="translation">
                                <div class="microbe-icon">üî§</div>
                                <div>Tradu√ß√£o</div>
                            </div>
                            <div class="microbe-card" data-process="mutation">
                                <div class="microbe-icon">‚ö°</div>
                                <div>Muta√ß√£o</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üîß Ferramentas de Edi√ß√£o</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Taxa de Muta√ß√£o:</span>
                                <span id="mutationRateValue">0.001%</span>
                            </div>
                            <input type="range" id="mutationRate" min="0" max="1" value="0.001" step="0.0001">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Express√£o G√™nica:</span>
                                <span id="geneExpressionValue">75%</span>
                            </div>
                            <input type="range" id="geneExpression" min="0" max="100" value="75" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Recombina√ß√£o:</span>
                                <span id="recombinationValue">50%</span>
                            </div>
                            <input type="range" id="recombination" min="0" max="100" value="50" step="1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìä Estat√≠sticas Gen√©ticas</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>Pares de Base</div>
                                <div class="status-value" id="basePairs">3.2B</div>
                            </div>
                            <div class="status-indicator">
                                <div>Genes Ativos</div>
                                <div class="status-value" id="activeGenes">21,000</div>
                            </div>
                            <div class="status-indicator">
                                <div>Prote√≠nas</div>
                                <div class="status-value" id="proteinCount">100K</div>
                            </div>
                            <div class="status-indicator">
                                <div>Tel√¥meros</div>
                                <div class="status-value" id="telomereLength">8.5kb</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üß™ CRISPR Simulator</h4>
                        <input type="text" id="crisprSequence" placeholder="Digite sequ√™ncia alvo..." 
                               style="width: 100%; padding: 10px; margin: 10px 0; background: var(--light); border: 1px solid var(--primary); border-radius: 5px; color: white;">
                        <button class="btn btn-dna" onclick="performCRISPR()">Executar Edi√ß√£o</button>
                        <div id="crisprResult" style="margin-top: 10px; padding: 10px; background: var(--light); border-radius: 5px;"></div>
                    </div>

                    <div class="control-group">
                        <button class="btn btn-dna" onclick="startDNAProcess()">Iniciar Processo</button>
                        <button class="btn btn-primary" onclick="resetDNA()">Reiniciar</button>
                        <button class="btn btn-primary" onclick="exportDNAData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="dnaLog">
                        <div class="log-entry">Sistema gen√©tico inicializado</div>
                        <div class="log-entry">DNA helicoidal carregado</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Ecossistemas -->
        <div class="tab-content" id="ecosystems">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üåø Simula√ß√£o de Ecossistema</h3>
                    <div id="ecosystem3D">
                        <!-- Visualiza√ß√£o 3D do ecossistema -->
                    </div>
                    <div class="ecosystem-map" id="ecosystemMap">
                        <!-- Mapa do ecossistema -->
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles do Ecossistema</h3>
                    
                    <div class="control-group">
                        <h4>üèûÔ∏è Biomas</h4>
                        <div class="microbe-grid">
                            <div class="microbe-card active" data-biome="forest">
                                <div class="microbe-icon">üå≥</div>
                                <div>Floresta</div>
                            </div>
                            <div class="microbe-card" data-biome="ocean">
                                <div class="microbe-icon">üåä</div>
                                <div>Oceano</div>
                            </div>
                            <div class="microbe-card" data-biome="desert">
                                <div class="microbe-icon">üèúÔ∏è</div>
                                <div>Deserto</div>
                            </div>
                            <div class="microbe-card" data-biome="grassland">
                                <div class="microbe-icon">üåæ</div>
                                <div>Pradaria</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>‚öñÔ∏è Fatores Ambientais</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Temperatura:</span>
                                <span id="eco
                    <div class="control-group">
                        <h4>‚öñÔ∏è Fatores Ambientais</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Temperatura:</span>
                                <span id="ecoTempValue">25¬∞C</span>
                            </div>
                            <input type="range" id="ecoTemp" min="-10" max="50" value="25" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Umidade:</span>
                                <span id="humidityValue">65%</span>
                            </div>
                            <input type="range" id="humidity" min="0" max="100" value="65" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Luz Solar:</span>
                                <span id="sunlightValue">80%</span>
                            </div>
                            <input type="range" id="sunlight" min="0" max="100" value="80" step="1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>ü¶Å Popula√ß√µes</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>Produtores</div>
                                <div class="status-value" id="producers">1.2M</div>
                            </div>
                            <div class="status-indicator">
                                <div>Consumidores</div>
                                <div class="status-value" id="consumers">450K</div>
                            </div>
                            <div class="status-indicator">
                                <div>Decompositores</div>
                                <div class="status-value" id="decomposers">800K</div>
                            </div>
                            <div class="status-indicator">
                                <div>Biodiversidade</div>
                                <div class="status-value" id="biodiversity">85%</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìà Cadeia Alimentar</h4>
                        <div class="chart-container">
                            <canvas id="foodWebChart"></canvas>
                        </div>
                    </div>

                    <div class="control-group">
                        <button class="btn btn-ecosystem" onclick="startEcosystem()">Iniciar Simula√ß√£o</button>
                        <button class="btn btn-primary" onclick="addSpecies()">Adicionar Esp√©cie</button>
                        <button class="btn btn-primary" onclick="exportEcoData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="ecoLog">
                        <div class="log-entry">Ecossistema florestal inicializado</div>
                        <div class="log-entry">Cadeia alimentar estabelecida</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Intera√ß√µes Microbianas -->
        <div class="tab-content" id="microbes">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>ü¶† Placa de Petri Interativa</h3>
                    <div class="interaction-visualization">
                        <div class="petri-dish" id="petriDish">
                            <!-- Micr√≥bios ser√£o adicionados dinamicamente -->
                        </div>
                    </div>
                    <div class="status-indicators">
                        <div class="status-indicator">
                            <div>Bact√©rias</div>
                            <div class="status-value" id="bacteriaCount">1.5M</div>
                        </div>
                        <div class="status-indicator">
                            <div>Fungos</div>
                            <div class="status-value" id="fungiCount">800K</div>
                        </div>
                        <div class="status-indicator">
                            <div>V√≠rus</div>
                            <div class="status-value" id="virusCount">5M</div>
                        </div>
                        <div class="status-indicator">
                            <div>Intera√ß√µes</div>
                            <div class="status-value" id="interactionRate">120/s</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles Microbianos</h3>
                    
                    <div class="control-group">
                        <h4>ü¶† Tipos de Microrganismos</h4>
                        <div class="microbe-grid">
                            <div class="microbe-card active" data-microbe="e-coli">
                                <div class="microbe-icon">ü¶†</div>
                                <div>E. coli</div>
                            </div>
                            <div class="microbe-card" data-microbe="lactobacillus">
                                <div class="microbe-icon">ü¶†</div>
                                <div>Lactobacillus</div>
                            </div>
                            <div class="microbe-card" data-microbe="s-aureus">
                                <div class="microbe-icon">ü¶†</div>
                                <div>S. aureus</div>
                            </div>
                            <div class="microbe-card" data-microbe="influenza">
                                <div class="microbe-icon">ü¶†</div>
                                <div>Influenza</div>
                            </div>
                            <div class="microbe-card" data-microbe="rhizopus">
                                <div class="microbe-icon">üçÑ</div>
                                <div>Rhizopus</div>
                            </div>
                            <div class="microbe-card" data-microbe="penicillium">
                                <div class="microbe-icon">üçÑ</div>
                                <div>Penicillium</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>‚öóÔ∏è Condi√ß√µes do Meio</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>pH:</span>
                                <span id="microbePHValue">7.0</span>
                            </div>
                            <input type="range" id="microbePH" min="1" max="14" value="7.0" step="0.1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Temperatura:</span>
                                <span id="microbeTempValue">37¬∞C</span>
                            </div>
                            <input type="range" id="microbeTemp" min="20" max="60" value="37" step="0.1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Nutrientes:</span>
                                <span id="nutrientValue">85%</span>
                            </div>
                            <input type="range" id="nutrients" min="0" max="100" value="85" step="1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üîÑ Tipos de Intera√ß√£o</h4>
                        <div class="microbe-grid">
                            <div class="microbe-card" data-interaction="symbiosis">
                                <div class="microbe-icon">ü§ù</div>
                                <div>Simbiose</div>
                            </div>
                            <div class="microbe-card" data-interaction="competition">
                                <div class="microbe-icon">‚öîÔ∏è</div>
                                <div>Competi√ß√£o</div>
                            </div>
                            <div class="microbe-card" data-interaction="predation">
                                <div class="microbe-icon">üéØ</div>
                                <div>Preda√ß√£o</div>
                            </div>
                            <div class="microbe-card" data-interaction="parasitism">
                                <div class="microbe-icon">üß¨</div>
                                <div>Parasitismo</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìä Din√¢mica Populacional</h4>
                        <div class="chart-container">
                            <canvas id="microbeChart"></canvas>
                        </div>
                    </div>

                    <div class="control-group">
                        <button class="btn btn-bacteria" onclick="addBacteria()">+ Bact√©ria</button>
                        <button class="btn btn-fungi" onclick="addFungus()">+ Fungo</button>
                        <button class="btn btn-virus" onclick="addVirus()">+ V√≠rus</button>
                        <button class="btn btn-primary" onclick="startInfection()">Iniciar Infec√ß√£o</button>
                    </div>

                    <div class="data-log" id="microbeLog">
                        <div class="log-entry">Placa de Petri inicializada</div>
                        <div class="log-entry">Meio de cultura preparado</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Fisiologia Humana -->
        <div class="tab-content" id="human">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üë§ Sistema Corporal 3D</h3>
                    <div id="human3D">
                        <!-- Visualiza√ß√£o 3D do corpo humano -->
                    </div>
                    <div class="status-indicators">
                        <div class="status-indicator">
                            <div>Frequ√™ncia Card√≠aca</div>
                            <div class="status-value" id="heartRate">72 bpm</div>
                        </div>
                        <div class="status-indicator">
                            <div>Press√£o Arterial</div>
                            <div class="status-value" id="bloodPressure">120/80</div>
                        </div>
                        <div class="status-indicator">
                            <div>Taxa Metab√≥lica</div>
                            <div class="status-value" id="metabolicRate">1600 kcal</div>
                        </div>
                        <div class="status-indicator">
                            <div>Oxigena√ß√£o</div>
                            <div class="status-value" id="oxygenation">98%</div>
                        </div>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles Fisiol√≥gicos</h3>
                    
                    <div class="control-group">
                        <h4>üí™ Sistemas do Corpo</h4>
                        <div class="microbe-grid">
                            <div class="microbe-card active" data-system="cardiovascular">
                                <div class="microbe-icon">‚ù§Ô∏è</div>
                                <div>Cardiovascular</div>
                            </div>
                            <div class="microbe-card" data-system="respiratory">
                                <div class="microbe-icon">ü´Å</div>
                                <div>Respirat√≥rio</div>
                            </div>
                            <div class="microbe-card" data-system="nervous">
                                <div class="microbe-icon">üß†</div>
                                <div>Nervoso</div>
                            </div>
                            <div class="microbe-card" data-system="digestive">
                                <div class="microbe-icon">üçΩÔ∏è</div>
                                <div>Digest√≥rio</div>
                            </div>
                            <div class="microbe-card" data-system="immune">
                                <div class="microbe-icon">üõ°Ô∏è</div>
                                <div>Imune</div>
                            </div>
                            <div class="microbe-card" data-system="endocrine">
                                <div class="microbe-icon">‚öñÔ∏è</div>
                                <div>End√≥crino</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìä Sinais Vitais</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Frequ√™ncia Card√≠aca:</span>
                                <span id="heartRateValue">72 bpm</span>
                            </div>
                            <input type="range" id="heartRateSlider" min="40" max="200" value="72" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Taxa Respirat√≥ria:</span>
                                <span id="respirationValue">16 rpm</span>
                            </div>
                            <input type="range" id="respiration" min="8" max="40" value="16" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Temperatura Corporal:</span>
                                <span id="bodyTempValue">37.0¬∞C</span>
                            </div>
                            <input type="range" id="bodyTemp" min="35" max="41" value="37.0" step="0.1">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>ü©∫ Diagn√≥stico</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>Glicemia</div>
                                <div class="status-value" id="bloodGlucose">95 mg/dL</div>
                            </div>
                            <div class="status-indicator">
                                <div>Colesterol</div>
                                <div class="status-value" id="cholesterol">180 mg/dL</div>
                            </div>
                            <div class="status-indicator">
                                <div>Hemoglobina</div>
                                <div class="status-value" id="hemoglobin">14 g/dL</div>
                            </div>
                            <div class="status-indicator">
                                <div>Leuc√≥citos</div>
                                <div class="status-value" id="leukocytes">7.5K/ŒºL</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>ü¶† Resposta Imune</h4>
                        <button class="btn btn-virus" onclick="introducePathogen()">Introduzir Pat√≥geno</button>
                        <button class="btn btn-primary" onclick="activateImmuneResponse()">Ativar Imunidade</button>
                        <button class="btn btn-primary" onclick="administerVaccine()">Aplicar Vacina</button>
                        <div id="immuneResponse" style="margin-top: 10px; padding: 10px; background: var(--light); border-radius: 5px;">
                            Sistema imune em estado basal
                        </div>
                    </div>

                    <div class="control-group">
                        <button class="btn btn-primary" onclick="startPhysiology()">Iniciar Fisiologia</button>
                        <button class="btn btn-primary" onclick="resetPhysiology()">Reiniciar</button>
                        <button class="btn btn-primary" onclick="exportPhysioData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="physioLog">
                        <div class="log-entry">Sistema fisiol√≥gico inicializado</div>
                        <div class="log-entry">Sinais vitais dentro dos par√¢metros normais</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA: Evolu√ß√£o -->
        <div class="tab-content" id="evolution">
            <div class="simulator-grid">
                <div class="visualization-panel">
                    <h3>üîÑ √Årvore Filogen√©tica</h3>
                    <div id="evolution3D">
                        <!-- Visualiza√ß√£o 3D da evolu√ß√£o -->
                    </div>
                    <div class="chart-container">
                        <canvas id="evolutionChart"></canvas>
                    </div>
                </div>

                <div class="controls-panel">
                    <h3>üéõÔ∏è Controles Evolutivos</h3>
                    
                    <div class="control-group">
                        <h4>üî¨ Mecanismos Evolutivos</h4>
                        <div class="microbe-grid">
                            <div class="microbe-card active" data-mechanism="mutation">
                                <div class="microbe-icon">‚ö°</div>
                                <div>Muta√ß√£o</div>
                            </div>
                            <div class="microbe-card" data-mechanism="selection">
                                <div class="microbe-icon">üéØ</div>
                                <div>Sele√ß√£o</div>
                            </div>
                            <div class="microbe-card" data-mechanism="drift">
                                <div class="microbe-icon">üé≤</div>
                                <div>Deriva</div>
                            </div>
                            <div class="microbe-card" data-mechanism="migration">
                                <div class="microbe-icon">üîÑ</div>
                                <div>Migra√ß√£o</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>‚è±Ô∏è Par√¢metros Evolutivos</h4>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Taxa de Muta√ß√£o:</span>
                                <span id="evoMutationValue">0.01%</span>
                            </div>
                            <input type="range" id="evoMutation" min="0" max="1" value="0.01" step="0.001">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Press√£o Seletiva:</span>
                                <span id="selectionValue">65%</span>
                            </div>
                            <input type="range" id="selection" min="0" max="100" value="65" step="1">
                        </div>

                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Tamanho Populacional:</span>
                                <span id="popSizeValue">10,000</span>
                            </div>
                            <input type="range" id="popSize" min="100" max="100000" value="10000" step="100">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üìä Estat√≠sticas Evolutivas</h4>
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div>Gera√ß√µes</div>
                                <div class="status-value" id="generations">1,250</div>
                            </div>
                            <div class="status-indicator">
                                <div>Diversidade</div>
                                <div class="status-value" id="geneticDiversity">78%</div>
                            </div>
                            <div class="status-indicator">
                                <div>Fitness</div>
                                <div class="status-value" id="avgFitness">0.85</div>
                            </div>
                            <div class="status-indicator">
                                <div>Esp√©cies</div>
                                <div class="status-value" id="speciesCount">42</div>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>üß¨ Simulador de Evolu√ß√£o</h4>
                        <button class="btn btn-primary" onclick="startEvolution()">Iniciar Evolu√ß√£o</button>
                        <button class="btn btn-primary" onclick="addSelectionPressure()">Press√£o Seletiva</button>
                        <button class="btn btn-primary" onclick="speciate()">Especia√ß√£o</button>
                        <div id="evolutionEvent" style="margin-top: 10px; padding: 10px; background: var(--light); border-radius: 5px;">
                            Pronto para simula√ß√£o evolutiva
                        </div>
                    </div>

                    <div class="control-group">
                        <button class="btn btn-primary" onclick="runGeneration()">Executar Gera√ß√£o</button>
                        <button class="btn btn-primary" onclick="resetEvolution()">Reiniciar</button>
                        <button class="btn btn-primary" onclick="exportEvoData()">Exportar Dados</button>
                    </div>

                    <div class="data-log" id="evoLog">
                        <div class="log-entry">Sistema evolutivo inicializado</div>
                        <div class="log-entry">Popula√ß√£o fundadora estabelecida</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Banco de dados biol√≥gico
        const bioDatabase = {
            cells: {
                organelles: {
                    nucleus: { function: "Armazenamento do DNA", energy: 5 },
                    mitochondria: { function: "Produ√ß√£o de ATP", energy: 95 },
                    ribosome: { function: "S√≠ntese proteica", energy: 15 },
                    golgi: { function: "Modifica√ß√£o de prote√≠nas", energy: 10 },
                    er: { function: "S√≠ntese lip√≠dica", energy: 20 },
                    lysosome: { function: "Digest√£o intracelular", energy: 8 }
                }
            },
            microbes: {
                bacteria: {
                    'e-coli': { size: 2, reproduction: 20, pathogenicity: 3 },
                    'lactobacillus': { size: 3, reproduction: 30, pathogenicity: 1 },
                    's-aureus': { size: 1, reproduction: 25, pathogenicity: 4 }
                },
                viruses: {
                    'influenza': { size: 0.1, reproduction: 50, pathogenicity: 4 }
                },
                fungi: {
                    'rhizopus': { size: 10, reproduction: 15, pathogenicity: 2 },
                    'penicillium': { size: 8, reproduction: 12, pathogenicity: 1 }
                }
            },
            ecosystems: {
                forest: { temperature: 25, humidity: 65, biodiversity: 85 },
                ocean: { temperature: 18, humidity: 100, biodiversity: 92 },
                desert: { temperature: 35, humidity: 15, biodiversity: 45 },
                grassland: { temperature: 22, humidity: 50, biodiversity: 75 }
            },
            human: {
                systems: {
                    cardiovascular: { status: "Normal", efficiency: 95 },
                    respiratory: { status: "Normal", efficiency: 92 },
                    nervous: { status: "Normal", efficiency: 98 },
                    digestive: { status: "Normal", efficiency: 88 },
                    immune: { status: "Basal", efficiency: 85 },
                    endocrine: { status: "Normal", efficiency: 90 }
                }
            }
        };

        // Estado das simula√ß√µes
        let currentSimulation = {
            cells: {
                activeOrganelle: "nucleus",
                metabolism: 85,
                atp: 1200000,
                temperature: 37
            },
            genetics: {
                process: "replication",
                mutationRate: 0.001,
                geneExpression: 75,
                recombination: 50
            },
            ecosystems: {
                biome: "forest",
                temperature: 25,
                humidity: 65,
                sunlight: 80
            },
            microbes: {
                selectedMicrobe: "e-coli",
                pH: 7.0,
                temperature: 37,
                nutrients: 85,
                interaction: "symbiosis"
            },
            human: {
                system: "cardiovascular",
                heartRate: 72,
                respiration: 16,
                bodyTemp: 37.0
            },
            evolution: {
                mechanism: "mutation",
                mutationRate: 0.01,
                selection: 65,
                popSize: 10000
            }
        };

        // Vari√°veis de visualiza√ß√£o
        let cellScene, dnaScene, ecosystemScene, microbeScene, humanScene, evolutionScene;
        let foodWebChart, microbeChart, evolutionChart;

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            initializeCharts();
            initialize3DVisualizations();
            initializeEventListeners();
            initializePetriDish();
            initializeEcosystemMap();
            updateAllDisplays();
        });

        // Sistema de Abas
        function initializeTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // Inicializar Gr√°ficos
        function initializeCharts() {
            initializeFoodWebChart();
            initializeMicrobeChart();
            initializeEvolutionChart();
        }

        function initializeFoodWebChart() {
            const ctx = document.getElementById('foodWebChart').getContext('2d');
            foodWebChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Produtores', 'Consumidores Prim√°rios', 'Consumidores Secund√°rios', 'Decompositores'],
                    datasets: [{
                        data: [40, 25, 15, 20],
                        backgroundColor: ['#6cbe45', '#2b5b84', '#ffa726', '#ab47bc']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });
        }

        function initializeMicrobeChart() {
            const ctx = document.getElementById('microbeChart').getContext('2d');
            microbeChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['0h', '2h', '4h', '6h', '8h', '10h', '12h'],
                    datasets: [
                        {
                            label: 'Bact√©rias',
                            data: [100, 200, 800, 3200, 12800, 51200, 204800],
                            borderColor: '#2b5b84',
                            backgroundColor: 'rgba(43, 91, 132, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Fungos',
                            data: [50, 100, 400, 1600, 6400, 25600, 102400],
                            borderColor: '#ffa726',
                            backgroundColor: 'rgba(255, 167, 38, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'V√≠rus',
                            data: [200, 800, 3200, 12800, 51200, 204800, 819200],
                            borderColor: '#ff4757',
                            backgroundColor: 'rgba(255, 71, 87, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'logarithmic',
                            title: {
                                display: true,
                                text: 'Popula√ß√£o (escala log)',
                                color: '#ffffff'
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#ffffff' }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Tempo (horas)',
                                color: '#ffffff'
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#ffffff' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });
        }

        function initializeEvolutionChart() {
            const ctx = document.getElementById('evolutionChart').getContext('2d');
            evolutionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['G1', 'G100', 'G200', 'G300', 'G400', 'G500'],
                    datasets: [
                        {
                            label: 'Fitness M√©dio',
                            data: [0.5, 0.65, 0.72, 0.78, 0.82, 0.85],
                            borderColor: '#6cbe45',
                            backgroundColor: 'rgba(108, 190, 69, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Diversidade Gen√©tica',
                            data: [100, 85, 78, 72, 75, 78],
                            borderColor: '#ab47bc',
                            backgroundColor: 'rgba(171, 71, 188, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: 'Valor',
                                color: '#ffffff'
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#ffffff' }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Gera√ß√µes',
                                color: '#ffffff'
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#ffffff' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });
        }

        // Inicializar Visualiza√ß√µes 3D
        function initialize3DVisualizations() {
            initializeCell3D();
            initializeDNA3D();
            initializeEcosystem3D();
            initializeHuman3D();
            initializeEvolution3D();
        }

        function initializeCell3D() {
            const container = document.getElementById('cell3D');
            
            cellScene = new THREE.Scene();
            cellScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 15;
            
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            cellScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            cellScene.add(directionalLight);
            
            // Membrana celular
            const membraneGeometry = new THREE.SphereGeometry(5, 32, 32);
            const membraneMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x6cbe45,
                transparent: true,
                opacity: 0.3
            });
            const membrane = new THREE.Mesh(membraneGeometry, membraneMaterial);
            cellScene.add(membrane);
            
            // N√∫cleo
            const nucleusGeometry = new THREE.SphereGeometry(1.5, 16, 16);
            const nucleusMaterial = new THREE.MeshPhongMaterial({ color: 0xab47bc });
            const nucleus = new THREE.Mesh(nucleusGeometry, nucleusMaterial);
            nucleus.position.set(1, 1, 1);
            cellScene.add(nucleus);
            
            // Mitoc√¥ndrias
            const mitochondriaGeometry = new THREE.SphereGeometry(0.5, 8, 8);
            const mitochondriaMaterial = new THREE.MeshPhongMaterial({ color: 0xff6b00 });
            
            for (let i = 0; i < 8; i++) {
                const mitochondria = new THREE.Mesh(mitochondriaGeometry, mitochondriaMaterial);
                mitochondria.position.set(
                    (Math.random() - 0.5) * 3,
                    (Math.random() - 0.5) * 3,
                    (Math.random() - 0.5) * 3
                );
                cellScene.add(mitochondria);
            }
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(cellScene, camera);
            }
            animate();
        }

        function initializeDNA3D() {
            const container = document.getElementById('dna3D');
            
            dnaScene = new THREE.Scene();
            dnaScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 10;
            
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            dnaScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            dnaScene.add(directionalLight);
            
            // Criar estrutura de DNA helicoidal
            createDNAHelix();
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(dnaScene, camera);
            }
            animate();
        }

        function createDNAHelix() {
            const basePairs = 20;
            const radius = 2;
            const heightStep = 0.3;
            
            for (let i = 0; i < basePairs; i++) {
                const angle = i * Math.PI / 4;
                const height = i * heightStep;
                
                // Bases nitrogenadas
                const baseGeometry = new THREE.SphereGeometry(0.1, 8, 8);
                const baseMaterial1 = new THREE.MeshPhongMaterial({ color: 0xff4757 }); // Adenina
                const baseMaterial2 = new THREE.MeshPhongMaterial({ color: 0x2b5b84 }); // Timina
                
                const base1 = new THREE.Mesh(baseGeometry, baseMaterial1);
                base1.position.set(
                    radius * Math.cos(angle),
                    height,
                    radius * Math.sin(angle)
                );
                
                const base2 = new THREE.Mesh(baseGeometry, baseMaterial2);
                base2.position.set(
                    radius * Math.cos(angle + Math.PI),
                    height,
                    radius * Math.sin(angle + Math.PI)
                );
                
                dnaScene.add(base1);
                dnaScene.add(base2);
                
                // Liga√ß√µes entre bases
                const bondGeometry = new THREE.CylinderGeometry(0.02, 0.02, radius * 2);
                const bondMaterial = new THREE.MeshPhongMaterial({ color: 0x6cbe45 });
                const bond = new THREE.Mesh(bondGeometry, bondMaterial);
                bond.position.set(0, height, 0);
                bond.lookAt(base1.position);
                bond.rotateX(Math.PI / 2);
                dnaScene.add(bond);
            }
        }

        function initializeEcosystem3D() {
            const container = document.getElementById('ecosystem3D');
            
            ecosystemScene = new THREE.Scene();
            ecosystemScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(20, 15, 20);
            
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            ecosystemScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 10, 5);
            ecosystemScene.add(directionalLight);
            
            // Ch√£o
            const groundGeometry = new THREE.PlaneGeometry(30, 30);
            const groundMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x3d7c47,
                side: THREE.DoubleSide 
            });
            const ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            ecosystemScene.add(ground);
            
            // √Årvores
            const treeGeometry = new THREE.ConeGeometry(1, 5, 8);
            const treeMaterial = new THREE.MeshPhongMaterial({ color: 0x2d5a27 });
            
            for (let i = 0; i < 10; i++) {
                const tree = new THREE.Mesh(treeGeometry, treeMaterial);
                tree.position.set(
                    (Math.random() - 0.5) * 25,
                    2.5,
                    (Math.random() - 0.5) * 25
                );
                ecosystemScene.add(tree);
            }
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(ecosystemScene, camera);
            }
            animate();
        }

        function initializeHuman3D() {
            const container = document.getElementById('human3D');
            
            humanScene = new THREE.Scene();
            humanScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(0, 0, 15);
            
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            humanScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            humanScene.add(directionalLight);
            
            // Corpo humano simplificado
            const bodyGeometry = new THREE.SphereGeometry(3, 32, 32);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xffdbac,
                transparent: true,
                opacity: 0.8
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            humanScene.add(body);
            
            // √ìrg√£os principais
            const heartGeometry = new THREE.SphereGeometry(0.5, 16, 16);
            const heartMaterial = new THREE.MeshPhongMaterial({ color: 0xff4757 });
            const heart = new THREE.Mesh(heartGeometry, heartMaterial);
            heart.position.set(-1, 0.5, 1);
            humanScene.add(heart);
            
            const lungGeometry = new THREE.SphereGeometry(0.7, 16, 16);
            const lungMaterial = new THREE.MeshPhongMaterial({ color: 0x87ceeb });
            const leftLung = new THREE.Mesh(lungGeometry, lungMaterial);
            leftLung.position.set(1, 1, 0.5);
            humanScene.add(leftLung);
            
            const rightLung = new THREE.Mesh(lungGeometry, lungMaterial);
            rightLung.position.set(-1, 1, 0.5);
            humanScene.add(rightLung);
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                
                // Animar batimento card√≠aco
                heart.scale.x = 1 + Math.sin(Date.now() * 0.01) * 0.2;
                heart.scale.y = 1 + Math.sin(Date.now() * 0.01) * 0.2;
                heart.scale.z = 1 + Math.sin(Date.now() * 0.01) * 0.2;
                
                renderer.render(humanScene, camera);
            }
            animate();
        }

        function initializeEvolution3D() {
            const container = document.getElementById('evolution3D');
            
            evolutionScene = new THREE.Scene();
            evolutionScene.background = new THREE.Color(0x1e1e2f);
            
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(10, 10, 10);
            
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);
            
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            
            // Luz
            const ambientLight = new THREE.AmbientLight(0x404040);
            evolutionScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 5, 5);
            evolutionScene.add(directionalLight);
            
            // √Årvore filogen√©tica 3D
            createPhylogeneticTree();
            
            function animate() {
                requestAnimationFrame(animate);
                controls.update();
                renderer.render(evolutionScene, camera);
            }
            animate();
        }

        function createPhylogeneticTree() {
            // Implementa√ß√£o simplificada de √°rvore filogen√©tica
            const rootGeometry = new THREE.SphereGeometry(0.3, 8, 8);
            const rootMaterial = new THREE.MeshPhongMaterial({ color: 0x6cbe45 });
            const root = new THREE.Mesh(rootGeometry, rootMaterial);
            root.position.set(0, 0, 0);
            evolutionScene.add(root);
            
            // Ramos da √°rvore
            for (let i = 0; i < 5; i++) {
                const angle = (i / 5) * Math.PI * 2;
                const branchLength = 2 + Math.random() * 3;
                
                const branchGeometry = new THREE.CylinderGeometry(0.05, 0.05, branchLength);
                const branchMaterial = new THREE.MeshPhongMaterial({ color: 0x8b4513 });
                const branch = new THREE.Mesh(branchGeometry, branchMaterial);
                
                branch.position.set(
                    Math.cos(angle) * branchLength / 2,
                    branchLength / 2,
                    Math.sin(angle) * branchLength / 2
                );
                branch.lookAt(new THREE.Vector3(0, 0, 0));
                branch.rotateX(Math.PI / 2);
                
                evolutionScene.add(branch);
                
                // Folhas/esp√©cies
                const leafGeometry = new THREE.SphereGeometry(0.2, 6, 6);
                const leafMaterial = new THREE.MeshPhongMaterial({ color: 0x2d5a27 });
                const leaf = new THREE.Mesh(leafGeometry, leafMaterial);
                leaf.position.set(
                    Math.cos(angle) * branchLength,
                    branchLength,
                    Math.sin(angle) * branchLength
                );
                evolutionScene.add(leaf);
            }
        }

        // Inicializar Placa de Petri
        function initializePetriDish() {
            const petriDish = document.getElementById('petriDish');
            
            // Adicionar alguns micr√≥bios iniciais
            for (let i = 0; i < 15; i++) {
                addMicrobeToPetri('bacteria');
            }
            for (let i = 0; i < 8; i++) {
                addMicrobeToPetri('fungi');
            }
            for (let i = 0; i < 5; i++) {
                addMicrobeToPetri('virus');
            }
        }

        function addMicrobeToPetri(type) {
            const petriDish = document.getElementById('petriDish');
            const microbe = document.createElement('div');
            microbe.className = `microbe ${type}`;
            
            const size = type === 'bacteria' ? 8 : type === 'fungi' ? 12 : 6;
            const color = type === 'bacteria' ? '#2b5b84' : type === 'fungi' ? '#ffa726' : '#ff4757';
            
            microbe.style.width = `${size}px`;
            microbe.style.height = `${size}px`;
            microbe.style.background = color;
            microbe.style.left = `${Math.random() * 180 + 10}px`;
            microbe.style.top = `${Math.random() * 180 + 10}px`;
            microbe.style.animationDelay = `${Math.random() * 2}s`;
            
            petriDish.appendChild(microbe);
        }

        // Inicializar Mapa do Ecossistema
        function initializeEcosystemMap() {
            const ecosystemMap = document.getElementById('ecosystemMap');
            
            // Adicionar organismos ao mapa
            const organisms = [
                { type: 'producer', emoji: 'üåø', x: 50, y: 30 },
                { type: 'herbivore', emoji: 'üêá', x: 120, y: 80 },
                { type: 'carnivore', emoji: 'ü¶ä', x: 200, y: 150 },
                { type: 'decomposer', emoji: 'üçÑ', x: 80, y: 180 },
                { type: 'producer', emoji: 'üå≥', x: 250, y: 60 },
                { type: 'herbivore', emoji: 'üêøÔ∏è', x: 180, y: 100 }
            ];
            
            organisms.forEach(org => {
                const organism = document.createElement('div');
                organism.className = 'organism';
                organism.innerHTML = org.emoji;
                organism.style.left = `${org.x}px`;
                organism.style.top = `${org.y}px`;
                ecosystemMap.appendChild(organism);
            });
        }

        // Event Listeners
        function initializeEventListeners() {
            // C√©lulas
            document.querySelectorAll('.microbe-card[data-organelle]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.microbe-card[data-organelle]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.cells.activeOrganelle = this.dataset.organelle;
                    updateOrganelleInfo();
                });
            });

            document.getElementById('metabolismSlider').addEventListener('input', updateCellProcesses);
            document.getElementById('atpSlider').addEventListener('input', updateCellProcesses);
            document.getElementById('cellTemp').addEventListener('input', updateCellProcesses);

            // Gen√©tica
            document.querySelectorAll('.microbe-card[data-process]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.microbe-card[data-process]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.genetics.process = this.dataset.process;
                    updateGeneticProcess();
                });
            });

            document.getElementById('mutationRate').addEventListener('input', updateGenetics);
            document.getElementById('geneExpression').addEventListener('input', updateGenetics);
            document.getElementById('recombination').addEventListener('input', updateGenetics);

            // Ecossistemas
            document.querySelectorAll('.microbe-card[data-biome]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.microbe-card[data-biome]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.ecosystems.biome = this.dataset.biome;
                    updateEcosystem();
                });
            });

            document.getElementById('ecoTemp').addEventListener('input', updateEcosystem);
            document.getElementById('humidity').addEventListener('input', updateEcosystem);
            document.getElementById('sunlight').addEventListener('input', updateEcosystem);

            // Micr√≥bios
            document.querySelectorAll('.microbe-card[data-microbe]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.microbe-card[data-microbe]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.microbes.selectedMicrobe = this.dataset.microbe;
                    updateMicrobeInfo();
                });
            });

            document.querySelectorAll('.microbe-card[data-interaction]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.microbe-card[data-interaction]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.microbes.interaction = this.dataset.interaction;
                    updateInteractionType();
                });
            });

            document.getElementById('microbePH').addEventListener('input', updateMicrobeEnvironment);
            document.getElementById('microbeTemp').addEventListener('input', updateMicrobeEnvironment);
            document.getElementById('nutrients').addEventListener('input', updateMicrobeEnvironment);

            // Fisiologia Humana
            document.querySelectorAll('.microbe-card[data-system]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.microbe-card[data-system]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.human.system = this.dataset.system;
                    updateBodySystem();
                });
            });

            document.getElementById('heartRateSlider').addEventListener('input', updateVitalSigns);
            document.getElementById('respiration').addEventListener('input', updateVitalSigns);
            document.getElementById('bodyTemp').addEventListener('input', updateVitalSigns);

            // Evolu√ß√£o
            document.querySelectorAll('.microbe-card[data-mechanism]').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.microbe-card[data-mechanism]').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    currentSimulation.evolution.mechanism = this.dataset.mechanism;
                    updateEvolutionMechanism();
                });
            });

            document.getElementById('evoMutation').addEventListener('input', updateEvolution);
            document.getElementById('selection').addEventListener('input', updateEvolution);
            document.getElementById('popSize').addEventListener('input', updateEvolution);
        }

        // Fun√ß√µes de Atualiza√ß√£o
        function updateAllDisplays() {
            updateCellProcesses();
            updateGenetics();
            updateEcosystem();
            updateMicrobeEnvironment();
            updateVitalSigns();
            updateEvolution();
        }

        function updateCellProcesses() {
            const metabolism = parseInt(document.getElementById('metabolismSlider').value);
            const atp = parseInt(document.getElementById('atpSlider').value);
            const temp = parseFloat(document.getElementById('cellTemp').value);
            
            currentSimulation.cells.metabolism = metabolism;
            currentSimulation.cells.atp = atp;
            currentSimulation.cells.temperature = temp;
            
            document.getElementById('metabolismValue').textContent = metabolism + '%';
            document.getElementById('atpValue').textContent = (atp / 1000000).toFixed(1) + 'M/s';
            document.getElementById('cellTempValue').textContent = temp + '¬∞C';
            
            // Atualizar indicadores
            document.getElementById('metabolismRate').textContent = metabolism + '%';
            document.getElementById('atpCount').textContent = (atp / 1000000).toFixed(1) + 'M/s';
            document.getElementById('homeostasis').textContent = Math.min(100, 100 - Math.abs(37 - temp) * 2) + '%';
        }

        function updateOrganelleInfo() {
            const organelle = currentSimulation.cells.activeOrganelle;
            const info = bioDatabase.cells.organelles[organelle];
            
            addLogEntry('cellLog', `Organela selecionada: ${organelle}`);
            addLogEntry('cellLog', `Fun√ß√£o: ${info.function}`);
            addLogEntry('cellLog', `Consumo energ√©tico: ${info.energy}%`);
        }

        function updateGenetics() {
            const mutation = parseFloat(document.getElementById('mutationRate').value);
            const expression = parseInt(document.getElementById('geneExpression').value);
            const recombination = parseInt(document.getElementById('recombination').value);
            
            currentSimulation.genetics.mutationRate = mutation;
            currentSimulation.genetics.geneExpression = expression;
            currentSimulation.genetics.recombination = recombination;
            
            document.getElementById('mutationRateValue').textContent = (mutation * 100).toFixed(3) + '%';
            document.getElementById('geneExpressionValue').textContent = expression + '%';
            document.getElementById('recombinationValue').textContent = recombination + '%';
        }

        function updateGeneticProcess() {
            const process = currentSimulation.genetics.process;
            let description = '';
            
            switch(process) {
                case 'replication':
                    description = 'Duplica√ß√£o do DNA antes da divis√£o celular';
                    break;
                case 'transcription':
                    description = 'S√≠ntese de RNA a partir do DNA';
                    break;
                case 'translation':
                    description = 'S√≠ntese de prote√≠nas a partir do RNA';
                    break;
                case 'mutation':
                    description = 'Altera√ß√µes na sequ√™ncia do DNA';
                    break;
            }
            
            addLogEntry('dnaLog', `Processo gen√©tico: ${process}`);
            addLogEntry('dnaLog', description);
        }

        function updateEcosystem() {
            const temp = parseInt(document.getElementById('ecoTemp').value);
            const humidity = parseInt(document.getElementById('humidity').value);
            const sunlight = parseInt(document.getElementById('sunlight').value);
            const biome = currentSimulation.ecosystems.biome;
            
            currentSimulation.ecosystems.temperature = temp;
            currentSimulation.ecosystems.humidity = humidity;
            currentSimulation.ecosystems.sunlight = sunlight;
            
            document.getElementById('ecoTempValue').textContent = temp + '¬∞C';
            document.getElementById('humidityValue').textContent = humidity + '%';
            document.getElementById('sunlightValue').textContent = sunlight + '%';
            
            // Atualizar popula√ß√µes baseadas no bioma
            const basePopulations = bioDatabase.ecosystems[biome];
            document.getElementById('biodiversity').textContent = basePopulations.biodiversity + '%';
            
            addLogEntry('ecoLog', `Bioma alterado para: ${biome}`);
            addLogEntry('ecoLog', `Temperatura: ${temp}¬∞C, Umidade: ${humidity}%`);
        }

        function updateMicrobeEnvironment() {
            const pH = parseFloat(document.getElementById('microbePH').value);
            const temp = parseFloat(document.getElementById('microbeTemp').value);
            const nutrients = parseInt(document.getElementById('nutrients').value);
            
            currentSimulation.microbes.pH = pH;
            currentSimulation.microbes.temperature = temp;
            currentSimulation.microbes.nutrients = nutrients;
            
            document.getElementById('microbePHValue').textContent = pH.toFixed(1);
            document.getElementById('microbeTempValue').textContent = temp + '¬∞C';
            document.getElementById('nutrientValue').textContent = nutrients + '%';
            
            // Atualizar contagens de micr√≥bios
            const growthFactor = (nutrients / 100) * (pH > 6 && pH < 8 ? 1 : 0.5);
            document.getElementById('bacteriaCount').textContent = Math.floor(1500000 * growthFactor).toLocaleString();
            document.getElementById('fungiCount').textContent = Math.floor(800000 * growthFactor).toLocaleString();
            document.getElementById('virusCount').textContent = Math.floor(5000000 * growthFactor).toLocaleString();
        }

        function updateMicrobeInfo() {
            const microbe = currentSimulation.microbes.selectedMicrobe;
            let info = null;
            
            if (microbe.includes('-')) {
                const [type, name] = microbe.split('-');
                info = bioDatabase.microbes[type][microbe];
            }
            
            if (info) {
                addLogEntry('microbeLog', `Micr√≥bio selecionado: ${microbe}`);
                addLogEntry('microbeLog', `Tamanho: ${info.size}Œºm, Reprodu√ß√£o: ${info.reproduction}min`);
            }
        }

        function updateInteractionType() {
            const interaction = currentSimulation.microbes.interaction;
            let description = '';
            
            switch(interaction) {
                case 'symbiosis':
                    description = 'Rela√ß√£o mutualmente ben√©fica entre esp√©cies';
                    break;
                case 'competition':
                    description = 'Disputa por recursos limitados';
                    break;
                case 'predation':
                    description = 'Um organismo consome outro';
                    break;
                case 'parasitism':
                    description = 'Um organismo se beneficia √†s custas de outro';
                    break;
            }
            
            addLogEntry('microbeLog', `Intera√ß√£o: ${interaction}`);
            addLogEntry('microbeLog', description);
        }

        function updateVitalSigns() {
            const heartRate = parseInt(document.getElementById('heartRateSlider').value);
            const respiration = parseInt(document.getElementById('respiration').value);
            const bodyTemp = parseFloat(document.getElementById('bodyTemp').value);
            
            currentSimulation.human.heartRate = heartRate;
            currentSimulation.human.respiration = respiration;
            currentSimulation.human.bodyTemp = bodyTemp;
            
            document.getElementById('heartRateValue').textContent = heartRate + ' bpm';
            document.getElementById('respirationValue').textContent = respiration + ' rpm';
            document.getElementById('bodyTempValue').textContent = bodyTemp + '¬∞C';
            
            // Atualizar indicadores
            document.getElementById('heartRate').textContent = heartRate + ' bpm';
            document.getElementById('bloodPressure').textContent = calculateBloodPressure(heartRate);
            document.getElementById('oxygenation').textContent = calculateOxygenation(respiration);
        }

        function calculateBloodPressure(heartRate) {
            const systolic = 80 + (heartRate - 60) * 0.5;
            const diastolic = 50 + (heartRate - 60) * 0.3;
            return `${Math.round(systolic)}/${Math.round(diastolic)}`;
        }

        function calculateOxygenation(respiration) {
            return Math.max(85, 100 - Math.abs(16 - respiration) * 2) + '%';
        }

        function updateBodySystem() {
            const system = currentSimulation.human.system;
            const info = bioDatabase.human.systems[system];
            
            addLogEntry('physioLog', `Sistema selecionado: ${system}`);
            addLogEntry('physioLog', `Status: ${info.status}, Efici√™ncia: ${info.efficiency}%`);
        }

        function updateEvolution() {
            const mutation = parseFloat(document.getElementById('evoMutation').value);
            const selection = parseInt(document.getElementById('selection').value);
            const popSize = parseInt(document.getElementById('popSize').value);
            
            currentSimulation.evolution.mutationRate = mutation;
            currentSimulation.evolution.selection = selection;
            currentSimulation.evolution.popSize = popSize;
            
            document.getElementById('evoMutationValue').textContent = (mutation * 100).toFixed(2) + '%';
            document.getElementById('selectionValue').textContent = selection + '%';
            document.getElementById('popSizeValue').textContent = popSize.toLocaleString();
        }

        function updateEvolutionMechanism() {
            const mechanism = currentSimulation.evolution.mechanism;
            let description = '';
            
            switch(mechanism) {
                case 'mutation':
                    description = 'Altera√ß√µes aleat√≥rias no material gen√©tico';
                    break;
                case 'selection':
                    description = 'Sobreviv√™ncia diferencial e reprodu√ß√£o';
                    break;
                case 'drift':
                    description = 'Mudan√ßas aleat√≥rias na frequ√™ncia g√™nica';
                    break;
                case 'migration':
                    description = 'Fluxo g√™nico entre popula√ß√µes';
                    break;
            }
            
            addLogEntry('evoLog', `Mecanismo evolutivo: ${mechanism}`);
            addLogEntry('evoLog', description);
        }

        // Fun√ß√µes de A√ß√£o
        function startCellProcess() {
            addLogEntry('cellLog', 'Processos celulares iniciados');
            addLogEntry('cellLog', `Metabolismo: ${currentSimulation.cells.metabolism}%`);
            addLogEntry('cellLog', `Produ√ß√£o de ATP: ${currentSimulation.cells.atp} mol√©culas/s`);
        }

        function divideCell() {
            addLogEntry('cellLog', 'üöÄ DIVIS√ÉO CELULAR INICIADA');
            addLogEntry('cellLog', 'Cromossomos duplicados');
            addLogEntry('cellLog', 'Citocinese em andamento');
            addLogEntry('cellLog', '‚úÖ Divis√£o completada - 2 c√©lulas filhas');
        }

        function performCRISPR() {
            const sequence = document.getElementById('crisprSequence').value;
            if (sequence.length >= 3) {
                const result = document.getElementById('crisprResult');
                result.innerHTML = `
                    <div style="color: #6cbe45;">‚úÖ Edi√ß√£o CRISPR bem-sucedida</div>
                    <div>Sequ√™ncia alvo: ${sequence}</div>
                    <div>Gene editado com sucesso</div>
                `;
                addLogEntry('dnaLog', `Edi√ß√£o CRISPR executada: ${sequence}`);
            } else {
                const result = document.getElementById('crisprResult');
                result.innerHTML = '<div style="color: #ff4757;">‚ùå Sequ√™ncia muito curta</div>';
            }
        }

        function startDNAProcess() {
            const process = currentSimulation.genetics.process;
            addLogEntry('dnaLog', `Processo ${process} iniciado`);
            
            switch(process) {
                case 'replication':
                    addLogEntry('dnaLog', 'DNA helicase desenrolando dupla h√©lice');
                    addLogEntry('dnaLog', 'DNA polimerase sintetizando novas fitas');
                    break;
                case 'transcription':
                    addLogEntry('dnaLog', 'RNA polimerase ligando-se ao promotor');
                    addLogEntry('dnaLog', 'S√≠ntese de RNA mensageiro');
                    break;
                case 'translation':
                    addLogEntry('dnaLog', 'Ribossomo lendo mRNA');
                    addLogEntry('dnaLog', 'S√≠ntese de cadeia polipept√≠dica');
                    break;
            }
        }

        function startEcosystem() {
            const biome = currentSimulation.ecosystems.biome;
            addLogEntry('ecoLog', `Simula√ß√£o do ecossistema ${biome} iniciada`);
            addLogEntry('ecoLog', 'Cadeia alimentar estabelecida');
            addLogEntry('ecoLog', 'Ciclos biogeoqu√≠micos ativos');
        }

        function addSpecies() {
            const species = ['√Åguia ü¶Ö', 'Veado ü¶å', 'Salm√£o üêü', 'Abelha üêù', 'Orqu√≠dea üå∏'];
            const randomSpecies = species[Math.floor(Math.random() * species.length)];
            addLogEntry('ecoLog', `Nova esp√©cie adicionada: ${randomSpecies}`);
        }

        function addBacteria() {
            addMicrobeToPetri('bacteria');
            const count = parseInt(document.getElementById('bacteriaCount').textContent.replace(/,/g, ''));
            document.getElementById('bacteriaCount').textContent = (count + 50000).toLocaleString();
            addLogEntry('microbeLog', 'Col√¥nia de bact√©rias adicionada');
        }

        function addFungus() {
            addMicrobeToPetri('fungi');
            const count = parseInt(document.getElementById('fungiCount').textContent.replace(/,/g, ''));
            document.getElementById('fungiCount').textContent = (count + 25000).toLocaleString();
            addLogEntry('microbeLog', 'Col√¥nia de fungos adicionada');
        }

        function addVirus() {
            addMicrobeToPetri('virus');
            const count = parseInt(document.getElementById('virusCount').textContent.replace(/,/g, ''));
            document.getElementById('virusCount').textContent = (count + 100000).toLocaleString();
            addLogEntry('microbeLog', 'Popula√ß√£o viral adicionada');
        }

        function startInfection() {
            addLogEntry('microbeLog', 'ü¶† INFEC√á√ÉO INICIADA');
            addLogEntry('microbeLog', 'V√≠rus invadindo c√©lulas hospedeiras');
            addLogEntry('microbeLog', 'Resposta imune ativada');
        }

        function introducePathogen() {
            addLogEntry('physioLog', 'ü¶† PAT√ìGENO INTRODUZIDO');
            addLogEntry('physioLog', 'Sistema imune detectando invasor');
            document.getElementById('immuneResponse').innerHTML = 
                '<div style="color: #ff4757;">‚ö†Ô∏è Resposta imune ativada - Produ√ß√£o de anticorpos</div>';
        }

        function activateImmuneResponse() {
            addLogEntry('physioLog', 'üõ°Ô∏è RESPOSTA IMUNE REFOR√áADA');
            addLogEntry('physioLog', 'Linf√≥citos T e B ativados');
            addLogEntry('physioLog', 'Produ√ß√£o massiva de anticorpos');
            document.getElementById('immuneResponse').innerHTML = 
                '<div style="color: #6cbe45;">‚úÖ Resposta imune m√°xima - Pat√≥geno sendo eliminado</div>';
        }

        function administerVaccine() {
            addLogEntry('physioLog', 'üíâ VACINA ADMINISTRADA');
            addLogEntry('physioLog', 'Mem√≥ria imunol√≥gica estabelecida');
            addLogEntry('physioLog', 'Prote√ß√£o de longo prazo ativada');
        }

        function startPhysiology() {
            addLogEntry('physioLog', 'Sistemas fisiol√≥gicos ativados');
            addLogEntry('physioLog', 'Homeostase mantida');
            addLogEntry('physioLog', 'Fun√ß√µes vitais normais');
        }

        function startEvolution() {
            addLogEntry('evoLog', 'üîÑ SIMULA√á√ÉO EVOLUTIVA INICIADA');
            addLogEntry('evoLog', 'Popula√ß√£o fundadora estabelecida');
            addLogEntry('evoLog', 'Sele√ß√£o natural ativa');
        }

        function addSelectionPressure() {
            addLogEntry('evoLog', '‚ö° PRESS√ÉO SELETIVA APLICADA');
            addLogEntry('evoLog', 'Fitness sendo recalculado');
            addLogEntry('evoLog', 'Adapta√ß√µes emergindo');
        }

        function speciate() {
            addLogEntry('evoLog', 'üåø ESPECIA√á√ÉO DETECTADA');
            addLogEntry('evoLog', 'Novas esp√©cies emergindo');
            addLogEntry('evoLog', 'Isolamento reprodutivo estabelecido');
        }

        function runGeneration() {
            const generations = parseInt(document.getElementById('generations').textContent.replace(/,/g, ''));
            document.getElementById('generations').textContent = (generations + 1).toLocaleString();
            
            // Simular mudan√ßas evolutivas
            const currentFitness = parseFloat(document.getElementById('avgFitness').textContent);
            const newFitness = Math.min(1, currentFitness + (Math.random() * 0.05 - 0.02));
            document.getElementById('avgFitness').textContent = newFitness.toFixed(2);
            
            const currentDiversity = parseInt(document.getElementById('geneticDiversity').textContent);
            const newDiversity = Math.max(50, currentDiversity + (Math.random() * 10 - 5));
            document.getElementById('geneticDiversity').textContent = newDiversity + '%';
            
            addLogEntry('evoLog', `Gera√ß√£o ${generations + 1} completada`);
            addLogEntry('evoLog', `Fitness: ${newFitness.toFixed(2)}, Diversidade: ${newDiversity}%`);
        }

        // Fun√ß√µes de Reset
        function resetDNA() {
            document.getElementById('crisprSequence').value = '';
            document.getElementById('crisprResult').innerHTML = '';
            document.getElementById('dnaLog').innerHTML = '<div class="log-entry">Sistema gen√©tico reinicializado</div>';
        }

        function resetPhysiology() {
            document.getElementById('immuneResponse').innerHTML = 'Sistema imune em estado basal';
            document.getElementById('physioLog').innerHTML = '<div class="log-entry">Sistema fisiol√≥gico reinicializado</div>';
        }

        function resetEvolution() {
            document.getElementById('generations').textContent = '0';
            document.getElementById('geneticDiversity').textContent = '100%';
            document.getElementById('avgFitness').textContent = '0.50';
            document.getElementById('evoLog').innerHTML = '<div class="log-entry">Sistema evolutivo reinicializado</div>';
        }

        // Fun√ß√µes Auxiliares
        function addLogEntry(logId, message) {
            const log = document.getElementById(logId);
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        function exportCellData() {
            exportData(currentSimulation.cells, 'cell_data');
        }

        function exportDNAData() {
            exportData(currentSimulation.genetics, 'dna_data');
        }

        function exportEcoData() {
            exportData(currentSimulation.ecosystems, 'ecosystem_data');
        }

        function exportPhysioData() {
            exportData(currentSimulation.human, 'physiology_data');
        }

        function exportEvoData() {
            exportData(currentSimulation.evolution, 'evolution_data');
        }

        function exportData(data, filename) {
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `${filename}_${new Date().getTime()}.json`;
            link.click();
            
            addLogEntry(filename.split('_')[0] + 'Log', 'Dados exportados com sucesso!');
        }

        // Configurar MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
</body>
</html>